<nav class="toc">
  <h2>目次</h2>
  <ul id="toc-list"></ul>
</nav>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const container = document.querySelector(".post-content article");
    if (!container) return;

    const headings = container.querySelectorAll("h2, h3");
    const tocList = document.getElementById("toc-list");

    headings.forEach(heading => {
      const text = heading.innerText;
      const id = text.toLowerCase().replace(/[^\w]+/g, "-");
      heading.id = id;

      const li = document.createElement("li");
      li.className = heading.tagName.toLowerCase();

      const a = document.createElement("a");
      a.href = `#${id}`;
      a.textContent = text;

      li.appendChild(a);
      tocList.appendChild(li);
    });
  });
</script>
